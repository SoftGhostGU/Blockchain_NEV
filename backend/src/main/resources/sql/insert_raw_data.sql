-- ============================================================================
-- Blockchain_NEV 测试数据插入脚本
-- 版本: 2.0
-- 创建时间: 2025-10-02
-- 说明: 包含完整的测试数据，涵盖所有业务场景
-- ============================================================================

-- ============================================================================
-- 测试用户数据
-- ============================================================================
INSERT INTO `users` (`user_id`, `username`, `password`, `phone`, `credit_score`, `wallet_balance`, `balance`,
                     `created_at`, `updated_at`, `pref_quiet`, `pref_speed`, `pref_car_type`)
VALUES (1000, 'testuser1', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13800000001', 95, 1500.50,
        800.00, NOW(), NOW(), 1, 0, 1),
       (1001, 'testuser2', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13800000002', 88, 2200.75,
        1200.50, NOW(), NOW(), 0, 1, 0),
       (1002, 'testuser3', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13800000003', 92, 980.25,
        600.00, NOW(), NOW(), 1, 1, 1),
       (1003, '张三', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13900000001', 100, 3000.00,
        2000.00, NOW(), NOW(), 0, 0, 0),
       (1004, '李四', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13900000002', 85, 1800.60,
        900.30, NOW(), NOW(), 1, 0, 1),
       (1005, '王五', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13900000003', 78, 1200.00,
        500.00, NOW(), NOW(), 0, 1, 0);

-- ============================================================================
-- 测试车主数据
-- ============================================================================
INSERT INTO `drivers` (`driver_id`, `username`, `password`, `phone`, `credit_score`, `wallet_balance`, `bank_card`,
                       `created_at`, `updated_at`, `driver_service_quality`, `driver_punctuality`, `driver_rating_avg`,
                       `driver_order_count`)
VALUES (2000, 'driver001', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13700000001', 98, 5500.80,
        '6222021234567890123', NOW(), NOW(), 1, 1, 4.8, 125),
       (2001, 'driver002', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13700000002', 92, 3200.45,
        '6222021234567890456', NOW(), NOW(), 1, 0, 4.5, 89),
       (2002, '王师傅', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13800000101', 95, 4100.30,
        '6222021234567890789', NOW(), NOW(), 1, 1, 4.7, 156),
       (2003, '刘师傅', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13800000102', 87, 2800.70,
        '6222021234567891012', NOW(), NOW(), 0, 1, 4.2, 67),
       (2004, '陈师傅', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13800000103', 99, 6200.15,
        '6222021234567891345', NOW(), NOW(), 1, 1, 4.9, 203),
       (2005, '赵师傅', '$2a$10$q6UHaOgCFHKF20aRg3GchuDhJodePgNBAxkonBmYNoLzuAcZpTS7u', '13800000104', 93, 3800.25,
        '6222021234567891678', NOW(), NOW(), 1, 0, 4.6, 102);

-- ============================================================================
-- 车辆状况测试数据 (包含各种状态组合)
-- ============================================================================
INSERT INTO `vehicle_condition` (`condition_id`, `vehicle_model`, `battery_percent`, `miles_to_go`, `body_state`,
                                 `tire_pressure`, `brake_state`, `power_state`)
VALUES (3000, '特斯拉 Model 3', 88, '320公里', 1, 1, 1, 1),
       (3001, '比亚迪汉EV', 92, '450公里', 1, 1, 2, 1),
       (3002, '蔚来ES6', 75, '280公里', 2, 1, 1, 2),
       (3003, '小鹏P7', 95, '520公里', 1, 2, 1, 1),
       (3004, '理想ONE', 80, '350公里', 1, 1, 1, 3),
       (3005, '奔驰EQC', 90, '400公里', 1, 1, 1, 1),
       (3006, '宝马iX3', 85, '380公里', 2, 2, 1, 1),
       (3007, '奥迪e-tron', 78, '300公里', 1, 1, 2, 2),
       (3008, '蔚来ET7', 93, '480公里', 1, 1, 1, 1),
       (3009, '小鹏G9', 87, '420公里', 2, 1, 2, 1),
       (3010, '极氪001', 91, '460公里', 1, 2, 1, 2),
       (3011, '岚图FREE', 83, '360公里', 3, 2, 2, 2);

-- ============================================================================
-- 车辆测试数据 (包含不同审核状态)
-- ============================================================================
INSERT INTO `vehicles` (`vehicle_id`, `driver_id`, `license_plate`, `fuel_level`, `condition_id`, `audit_status`,
                        `car_cleanliness`, `car_type`, `lat`, `lon`, `created_at`, `updated_at`)
VALUES (4000, 2000, '京A88888', 88, 3000, 2, 1, 1, 39.90421300, 116.40739700, NOW(), NOW()),
       (4001, 2001, '京B66666', 92, 3001, 2, 1, 1, 39.91421300, 116.41739700, NOW(), NOW()),
       (4002, 2002, '沪A12345', 75, 3002, 1, 0, 2, 31.23039100, 121.47370200, NOW(), NOW()),
       (4003, 2003, '粤B67890', 95, 3003, 2, 1, 1, 22.54285400, 114.05956500, NOW(), NOW()),
       (4004, 2004, '川A54321', 80, 3004, 2, 1, 2, 30.65946700, 104.06573600, NOW(), NOW()),
       (4005, 2000, '京C99999', 90, 3005, 2, 1, 1, 39.89421300, 116.39739700, NOW(), NOW()),
       (4006, 2001, '京D77777', 85, 3006, 1, 1, 1, 39.92421300, 116.42739700, NOW(), NOW()),
       (4007, 2002, '沪B98765', 78, 3007, 2, 0, 2, 31.24039100, 121.48370200, NOW(), NOW()),
       (4008, 2003, '浙A11111', 93, 3008, 3, 1, 1, 30.26611400, 120.12426800, NOW(), NOW()),
       (4009, 2004, '苏A22222', 87, 3009, 2, 1, 1, 32.05826100, 118.79633300, NOW(), NOW()),
       (4010, 2005, '津A33333', 91, 3010, 1, 1, 2, 39.12519700, 117.19027800, NOW(), NOW()),
       (4011, 2005, '渝A44444', 83, 3011, 2, 0, 2, 29.56325400, 106.55148600, NOW(), NOW());

-- ============================================================================
-- 订单测试数据 (包含六种订单类型和不同状态)
-- ============================================================================
INSERT INTO `orders` (`order_id`, `user_id`, `driver_id`, `vehicle_id`, `start_location`, `destination`, `status`,
                      `estimated_price`, `actual_price`, `type`, `created_at`, `updated_at`, `estimated_time`,
                      `actual_time`, `access_policy`, `user_credit`, `user_pref_quiet`, `user_pref_speed`,
                      `user_pref_car_type`, `start_lat`, `start_lon`, `dest_lat`, `dest_lon`)
VALUES ('ORD20251001001', 1000, 2000, 4000, '北京市朝阳区三里屯', '北京市海淀区中关村', 3, 45.50, 48.00, '网约车',
        '2025-09-28 10:30:00', '2025-09-28 11:15:00', 35, 38, '(USER_1000) OR (DRIVER_2000)', 95, 1, 0, 1, 39.93712400,
        116.45574900, 39.98059800, 116.31450600),
       ('ORD20251001002', 1001, 2001, 4001, '上海市黄浦区南京路', '上海市浦东新区陆家嘴', 3, 32.80, 35.50, '网约车',
        '2025-09-29 14:20:00', '2025-09-29 15:05:00', 28, 30, '(USER_1001) OR (DRIVER_2001)', 88, 0, 1, 0, 31.23416800,
        121.47441400, 31.23538900, 121.50593100),
       ('ORD20251001003', 1002, 2002, 4007, '深圳市南山区科技园', '深圳市福田区CBD', 3, 28.60, 30.00, '紧急医疗',
        '2025-09-30 09:45:00', '2025-09-30 10:20:00', 22, 25, '(USER_1002) OR (DRIVER_2002)', 92, 1, 1, 1, 22.54285400,
        113.94956500, 22.54695500, 114.05956500),
       ('ORD20251001004', 1003, 2003, 4003, '广州市天河区珠江新城', '广州市越秀区北京路', 2, 25.30, NULL, '同城配送',
        '2025-10-01 16:10:00', '2025-10-01 16:10:00', 20, NULL, '(USER_1003) OR (DRIVER_2003)', 100, 0, 0, 0,
        23.11668200, 113.32942300, 23.12911400, 113.26430200),
       ('ORD20251001005', 1004, 2004, 4004, '成都市锦江区春熙路', '成都市高新区软件园', 1, 38.90, NULL, '路况监控',
        '2025-10-02 08:30:00', '2025-10-02 08:30:00', 32, NULL, '(USER_1004) OR (DRIVER_2004)', 85, 1, 0, 1,
        30.66296500, 104.08194200, 30.54795700, 104.06573600),
       ('ORD20251001006', 1005, 2005, 4009, '南京市鼓楼区新街口', '南京市玄武区紫金山', 3, 42.70, 45.20, '移动零售',
        '2025-09-27 15:45:00', '2025-09-27 16:30:00', 30, 33, '(USER_1005) OR (DRIVER_2005)', 78, 0, 1, 0, 32.04279900,
        118.77825900, 32.06832600, 118.84317800),
       ('ORD20251001007', 1000, 2001, 4001, '北京市东城区王府井', '北京市西城区金融街', 3, 28.50, 30.00, '能源交易',
        '2025-09-26 11:15:00', '2025-09-26 12:00:00', 25, 28, '(USER_1000) OR (DRIVER_2001)', 95, 1, 0, 1, 39.90962800,
        116.41626600, 39.91365500, 116.36551800),
       ('ORD20251001008', 1001, NULL, NULL, '杭州市西湖区文二路', '杭州市滨江区网商路', 0, 35.60, NULL, '网约车',
        '2025-10-02 09:00:00', '2025-10-02 09:00:00', 28, NULL, '(USER_1001)', 88, 0, 1, 0, 30.27903200, 120.13605600,
        30.20935400, 120.17926300),
       ('ORD20251001009', 1002, 2000, 4005, '天津市和平区南京路', '天津市河东区津滨大道', 2, 33.40, NULL, '同城配送',
        '2025-10-02 14:20:00', '2025-10-02 14:20:00', 26, NULL, '(USER_1002) OR (DRIVER_2000)', 92, 1, 1, 1,
        39.11775600, 117.20298600, 39.12345600, 117.25789300);

-- ============================================================================
-- 财务记录测试数据
-- ============================================================================
INSERT INTO `financials` (`financial_id`, `user_id`, `role`, `transaction_type`, `amount`, `transaction_time`)
VALUES (5000, 1000, 'user', 'Recharge', 1000.00, '2025-09-25 10:00:00'),
       (5001, 1000, 'user', 'Expenses', 48.00, '2025-09-28 11:15:00'),
       (5002, 2000, 'driver', 'Earnings', 48.00, '2025-09-28 11:15:00'),
       (5003, 1001, 'user', 'Recharge', 500.00, '2025-09-26 14:30:00'),
       (5004, 1001, 'user', 'Expenses', 35.50, '2025-09-29 15:05:00'),
       (5005, 2001, 'driver', 'Earnings', 35.50, '2025-09-29 15:05:00'),
       (5006, 1002, 'user', 'Recharge', 800.00, '2025-09-27 09:20:00'),
       (5007, 1002, 'user', 'Expenses', 30.00, '2025-09-30 10:20:00'),
       (5008, 2002, 'driver', 'Earnings', 30.00, '2025-09-30 10:20:00'),
       (5009, 2000, 'driver', 'Withdrawal', 200.00, '2025-09-30 18:00:00'),
       (5010, 2001, 'driver', 'Withdrawal', 150.00, '2025-10-01 12:00:00'),
       (5011, 1005, 'user', 'Recharge', 1200.00, '2025-09-25 16:30:00'),
       (5012, 1005, 'user', 'Expenses', 45.20, '2025-09-27 16:30:00'),
       (5013, 2005, 'driver', 'Earnings', 45.20, '2025-09-27 16:30:00'),
       (5014, 1000, 'user', 'Expenses', 30.00, '2025-09-26 12:00:00'),
       (5015, 2001, 'driver', 'Earnings', 30.00, '2025-09-26 12:00:00'),
       (5016, 2004, 'driver', 'Withdrawal', 300.00, '2025-10-01 20:15:00'),
       (5017, 2005, 'driver', 'Withdrawal', 250.00, '2025-10-02 10:45:00');

-- ============================================================================
-- 评价测试数据 (包含不同星级和审核状态)
-- ============================================================================
INSERT INTO `reviews` (`review_id`, `order_id`, `user_id`, `driver_id`, `content`, `created_at`, `updated_at`,
                       `comment_star`, `audit_status`)
VALUES (6000, 'ORD20251001001', 1000, 2000, '司机服务很好，车很干净，开车平稳，准时到达！', '2025-09-28 11:20:00',
        '2025-09-28 11:20:00', 5.0, 2),
       (6001, 'ORD20251001002', 1001, 2001, '整体不错，但是路上有点堵车，不过司机很耐心。', '2025-09-29 15:10:00',
        '2025-09-29 15:10:00', 4.5, 2),
       (6002, 'ORD20251001003', 1002, 2002, '紧急医疗服务响应很快，司机专业，非常感谢！', '2025-09-30 10:25:00',
        '2025-09-30 10:25:00', 5.0, 2),
       (6003, 'ORD20251001006', 1005, 2005, '移动零售服务很便民，司机态度很好，商品齐全。', '2025-09-27 16:35:00',
        '2025-09-27 16:35:00', 4.8, 2),
       (6004, 'ORD20251001007', 1000, 2001, '能源交易很方便，价格合理，效率高。', '2025-09-26 12:05:00',
        '2025-09-26 12:05:00', 4.6, 2),
       (6005, 'ORD20251001001', 1000, 2000, '非常满意，车子很新，司机态度好，会再次选择！', '2025-09-28 11:25:00',
        '2025-09-28 11:25:00', 4.8, 1),
       (6006, 'ORD20251001002', 1001, 2001, '价格合理，服务到位，就是车内温度有点高。', '2025-09-29 15:15:00',
        '2025-09-29 15:15:00', 4.2, 2),
       (6007, 'ORD20251001003', 1002, 2002, '医疗紧急情况处理得很专业，司机经验丰富。', '2025-09-30 10:30:00',
        '2025-09-30 10:30:00', 4.9, 1),
       (6008, 'ORD20251001006', 1005, 2005, '零售商品质量不错，配送及时，服务满意。', '2025-09-27 16:40:00',
        '2025-09-27 16:40:00', 4.3, 2),
       (6009, 'ORD20251001007', 1000, 2001, '能源交易过程透明，结算准确，体验良好。', '2025-09-26 12:10:00',
        '2025-09-26 12:10:00', 4.7, 1);

-- ============================================================================
-- 数据统计查询示例
-- ============================================================================

-- 查看数据插入结果
SELECT '数据库表记录统计' as info;
SELECT 'users' as table_name, COUNT(*) as record_count
FROM users
UNION ALL
SELECT 'drivers' as table_name, COUNT(*) as record_count
FROM drivers
UNION ALL
SELECT 'vehicle_condition' as table_name, COUNT(*) as record_count
FROM vehicle_condition
UNION ALL
SELECT 'vehicles' as table_name, COUNT(*) as record_count
FROM vehicles
UNION ALL
SELECT 'orders' as table_name, COUNT(*) as record_count
FROM orders
UNION ALL
SELECT 'financials' as table_name, COUNT(*) as record_count
FROM financials
UNION ALL
SELECT 'reviews' as table_name, COUNT(*) as record_count
FROM reviews;

-- 验证车辆状态枚举值分布
SELECT '车辆状态分布统计' as info;
SELECT CASE body_state WHEN 1 THEN '正常' WHEN 2 THEN '注意' WHEN 3 THEN '危险' END as body_state_desc,
       COUNT(*)                                                                     as count
FROM vehicle_condition
GROUP BY body_state;

-- 验证订单类型分布
SELECT '订单类型分布统计' as info;
SELECT type, COUNT(*) as count
FROM orders
GROUP BY type;

-- 验证评价星级分布
SELECT '评价星级分布统计' as info;
SELECT comment_star, COUNT(*) as count
FROM reviews
GROUP BY comment_star
ORDER BY comment_star DESC;